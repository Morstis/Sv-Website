<mors-generic-popup *ngIf="preQuestion" (closed)="close($event)">
  <div class="popup">
    <h1>Wie viele Boxen soll der neue "Wegpunkt" haben?</h1>
    <div>
      <div id="input">
        <input type="text" #boxen />
        <button type="submit" (click)="continue(boxen.value)">Senden</button>
      </div>
    </div>
  </div>
</mors-generic-popup>

<div id="box_overlay" scroll="no" *ngIf="!preQuestion">
  <div
    *ngFor="let div of divs; last as isLast; let i = index"
    class="box"
    [ngStyle]="{
      width: calcWidth(isLast) + '%',
      height: calcHeight(isLast) + '%',
      'background-image': div.load
        ? 'url(../../../assets/icons/Spinner-1.8s-200px.svg)'
        : '',
      background: div.image ? setBackground(div.image, isLast) : '',
      opacity: div.image ? 1 : 0.3
    }"
    (click)="fileInput.click()"
    [morsDragDrop]="div.image ? false : true"
    (onFileDropped)="preview($event, i)"
  >
    <!-- prettier-ignore -->
    <h1 class="centerH" *ngIf="div.load ? false : true">
      {{div.image ? div.shownTitle : 'Neuen "Punkt" erstellen'}}
    </h1>
    <input
      hidden
      type="file"
      #fileInput
      (change)="preview($event.target.files, i)"
    />
  </div>
</div>

<mors-generic-popup
  (closed)="createPointFor = -1"
  *ngIf="
    project === 'new'
      ? false
      : project === 'existing'
      ? false
      : createPointFor >= 0
      ? true
      : false
  "
>
  <div class="popup">
    <h1>Informationen</h1>
    <div id="input" style="margin-top: 10%;">
      <form novalidate ngSubmit #form="ngForm">
        <label>Titel</label>
        <input type="text" #title name="title" ngModel required />
        <button
          type="submit"
          [disabled]="!form.valid"
          [ngClass]="{
            btn_shadow: form.valid,
            valid: form.valid,
            notValid: !form.valid
          }"
          (click)="setProject('existing', title.value)"
        >
          Vorhandenes Projekt
        </button>
        <button
          type="submit"
          [disabled]="!form.valid"
          [ngClass]="{
            valid: form.valid,
            notValid: !form.valid
          }"
          (click)="setProject('new', title.value)"
        >
          Neues Projekt
        </button>
      </form>
    </div>
  </div>
</mors-generic-popup>
<mors-show-all-projects
  *ngIf="project === 'existing'"
  (selected)="goOn($event)"
>
</mors-show-all-projects>
<mors-articel
  *ngIf="project === 'new'"
  new="true"
  [image]="divs[createPointFor].image"
  (finished)="goOn($event)"
></mors-articel>

<button *ngIf="uploadReady" type="submit" (click)="upload()">
  Hochladen
</button>
